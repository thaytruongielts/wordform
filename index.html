<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BÃ i Giáº£ng Word Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        .draggable {
            cursor: grab;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            user-select: none;
            touch-action: none; /* Prevent browser default touch behavior */
        }
        .draggable:active {
            cursor: grabbing;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transform: scale(1.1) rotate(5deg);
        }
        .drop-zone {
            transition: background-color 0.3s ease, transform 0.3s ease;
            border-style: dashed;
            min-height: 40px; /* Ensure drop zone is visible */
        }
        .drop-zone.drag-over {
            background-color: #e2e8f0;
            transform: scale(1.05);
        }
        .correct {
            background-color: #d1fae5;
            animation: bounce 0.5s ease;
        }
        .incorrect {
            background-color: #fee2e2;
            animation: shake 0.5s ease;
        }
        .correct-answer-text {
            color: #10b981;
            font-weight: bold;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen py-10">

    <div class="bg-white rounded-3xl shadow-xl p-8 max-w-4xl mx-auto w-full">
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-extrabold text-indigo-700">BÃ i Giáº£ng Word Form</h1>
            <p class="text-lg text-gray-600 mt-2">KÃ©o vÃ  tháº£ tá»« Ä‘Ãºng vÃ o Ã´ trá»‘ng Ä‘á»ƒ hoÃ n thÃ nh 50 cÃ¢u!</p>
        </div>

        <div id="exercise-container" class="space-y-8">
            <!-- BÃ i táº­p sáº½ Ä‘Æ°á»£c táº¡o bá»Ÿi JavaScript -->
        </div>

        <div class="mt-8 text-center flex flex-col items-center space-y-4">
            <div class="flex space-x-4">
                <button id="check-button" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105">
                    Kiá»ƒm Tra
                </button>
                <button id="next-button" class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105">
                    CÃ¢u Tiáº¿p
                </button>
            </div>
            <div id="feedback-message" class="mt-4 text-xl font-semibold"></div>
        </div>
    </div>

    <script>
        // Dá»¯ liá»‡u 50 cÃ¢u há»i bÃ i táº­p Word Form
        const exercises = [
            { sentence: "The movie's ending was very ...", blanks: ["disappointing"], options: ["disappoint", "disappointment", "disappointing"], correct: "disappointing", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'ending'. 'Disappointing' (gÃ¢y tháº¥t vá»ng) Ä‘Æ°á»£c dÃ¹ng cho váº­t, sá»± viá»‡c." },
            { sentence: "His ... of the city was impressive.", blanks: ["knowledge"], options: ["know", "knowledgeable", "knowledge"], correct: "knowledge", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'His' Ä‘á»ƒ chá»‰ sá»± sá»Ÿ há»¯u. 'Knowledge' lÃ  danh tá»«." },
            { sentence: "They live in a quiet ... area.", blanks: ["residential"], options: ["reside", "resident", "residential"], correct: "residential", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'area'. 'Residential' (thuá»™c vá» khu dÃ¢n cÆ°) lÃ  tÃ­nh tá»« cá»§a 'reside'." },
            { sentence: "The new product was a great ...", blanks: ["success"], options: ["succeed", "successful", "success"], correct: "success", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a great' Ä‘á»ƒ chá»‰ sá»± thÃ nh cÃ´ng. 'Success' lÃ  danh tá»«." },
            { sentence: "The building was designed by a famous ...", blanks: ["architect"], options: ["architectural", "architecture", "architect"], correct: "architect", explanation: "Cáº§n má»™t danh tá»« (noun) chá»‰ ngÆ°á»i lÃ m nghá» Ä‘Ã³. 'Architect' lÃ  kiáº¿n trÃºc sÆ°." },
            { sentence: "She has a very ... imagination.", blanks: ["creative"], options: ["create", "creation", "creative"], correct: "creative", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'imagination'." },
            { sentence: "The price of the car is ... to the quality.", blanks: ["proportional"], options: ["proportion", "proportionally", "proportional"], correct: "proportional", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»©ng sau 'to be'. 'Proportional' cÃ³ nghÄ©a lÃ  'tá»· lá»‡ vá»›i'." },
            { sentence: "He drives his car very ...", blanks: ["carefully"], options: ["careful", "carefully", "carefulness"], correct: "carefully", explanation: "Cáº§n má»™t tráº¡ng tá»« (adverb) Ä‘á»ƒ bá»• nghÄ©a cho Ä‘á»™ng tá»« 'drives'." },
            { sentence: "We need to find a ... to this problem.", blanks: ["solution"], options: ["solve", "soluble", "solution"], correct: "solution", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a'. 'Solution' lÃ  danh tá»« cá»§a 'solve'." },
            { sentence: "The company's ... has grown rapidly.", blanks: ["development"], options: ["develop", "developing", "development"], correct: "development", explanation: "Cáº§n má»™t danh tá»« (noun) lÃ m chá»§ ngá»¯. 'Development' lÃ  danh tá»« cá»§a 'develop'." },
            { sentence: "I find this book very ...", blanks: ["interesting"], options: ["interest", "interested", "interesting"], correct: "interesting", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho váº­t, sá»± viá»‡c. 'Interesting' (thÃº vá»‹) Ä‘Æ°á»£c dÃ¹ng cho sÃ¡ch." },
            { sentence: "The children were very ... to see the circus.", blanks: ["excited"], options: ["excite", "excitement", "excited"], correct: "excited", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ diá»…n táº£ cáº£m xÃºc cá»§a ngÆ°á»i. 'Excited' (hÃ o há»©ng) Ä‘Æ°á»£c dÃ¹ng cho ngÆ°á»i." },
            { sentence: "They had a strong ... of victory.", blanks: ["belief"], options: ["believe", "believable", "belief"], correct: "belief", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a strong'. 'Belief' lÃ  danh tá»« cá»§a 'believe'." },
            { sentence: "This is a very ... matter.", blanks: ["sensitive"], options: ["sense", "sensible", "sensitive"], correct: "sensitive", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'matter'. 'Sensitive' (nháº¡y cáº£m) lÃ  tÃ­nh tá»«." },
            { sentence: "We need more ... about the plan.", blanks: ["information"], options: ["inform", "informational", "information"], correct: "information", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'more'. 'Information' lÃ  danh tá»« cá»§a 'inform'." },
            { sentence: "His ... behavior surprised everyone.", blanks: ["irresponsible"], options: ["responsible", "responsibly", "irresponsible"], correct: "irresponsible", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'behavior'. Tiá»n tá»‘ 'ir-' mang nghÄ©a phá»§ Ä‘á»‹nh." },
            { sentence: "The patient is making a slow ...", blanks: ["recovery"], options: ["recover", "recoverable", "recovery"], correct: "recovery", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a slow'. 'Recovery' lÃ  danh tá»« cá»§a 'recover'." },
            { sentence: "The project was a huge ...", blanks: ["investment"], options: ["invest", "investor", "investment"], correct: "investment", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a huge'. 'Investment' lÃ  danh tá»« cá»§a 'invest'." },
            { sentence: "She spoke very ... about her experience.", blanks: ["passionately"], options: ["passion", "passionate", "passionately"], correct: "passionately", explanation: "Cáº§n má»™t tráº¡ng tá»« (adverb) Ä‘á»ƒ bá»• nghÄ©a cho Ä‘á»™ng tá»« 'spoke'." },
            { sentence: "The new law will have a major ... on society.", blanks: ["impact"], options: ["impactful", "impacting", "impact"], correct: "impact", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a major'. 'Impact' lÃ  danh tá»«." },
            { sentence: "The company offers great ... for its employees.", blanks: ["benefits"], options: ["beneficial", "benefit", "benefits"], correct: "benefits", explanation: "Cáº§n má»™t danh tá»« (noun) sá»‘ nhiá»u sau 'great'. 'Benefits' lÃ  danh tá»«." },
            { sentence: "His ... speech moved the audience.", blanks: ["motivational"], options: ["motivate", "motivation", "motivational"], correct: "motivational", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'speech'. 'Motivational' lÃ  tÃ­nh tá»« cá»§a 'motivate'." },
            { sentence: "They celebrated their ... with a big party.", blanks: ["anniversary"], options: ["anniversary", "annual", "annually"], correct: "anniversary", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'their'. 'Anniversary' lÃ  danh tá»« chá»‰ ngÃ y ká»· niá»‡m." },
            { sentence: "The news was quite ...", blanks: ["surprising"], options: ["surprise", "surprised", "surprising"], correct: "surprising", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'news'. 'Surprising' (gÃ¢y ngáº¡c nhiÃªn) Ä‘Æ°á»£c dÃ¹ng cho sá»± viá»‡c." },
            { sentence: "We need to show more ... for others.", blanks: ["respect"], options: ["respectful", "respectable", "respect"], correct: "respect", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'show more'. 'Respect' lÃ  danh tá»«." },
            { sentence: "The government's ... has improved the economy.", blanks: ["policy"], options: ["politic", "political", "policy"], correct: "policy", explanation: "Cáº§n má»™t danh tá»« (noun) lÃ m chá»§ ngá»¯. 'Policy' lÃ  danh tá»«." },
            { sentence: "He is a very ... person.", blanks: ["competitive"], options: ["compete", "competition", "competitive"], correct: "competitive", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'person'." },
            { sentence: "The building lacks ...", blanks: ["modernity"], options: ["modern", "modernize", "modernity"], correct: "modernity", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'lacks'. 'Modernity' lÃ  danh tá»« cá»§a 'modern'." },
            { sentence: "The new film received a ... welcome.", blanks: ["enthusiastic"], options: ["enthuse", "enthusiasm", "enthusiastic"], correct: "enthusiastic", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'welcome'." },
            { sentence: "His ... is a great example for us all.", blanks: ["dedication"], options: ["dedicate", "dedicated", "dedication"], correct: "dedication", explanation: "Cáº§n má»™t danh tá»« (noun) lÃ m chá»§ ngá»¯. 'Dedication' lÃ  danh tá»« cá»§a 'dedicate'." },
            { sentence: "The city has a strong ... to the arts.", blanks: ["commitment"], options: ["commit", "committed", "commitment"], correct: "commitment", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a strong'. 'Commitment' lÃ  danh tá»« cá»§a 'commit'." },
            { sentence: "The new technology is very ...", blanks: ["effective"], options: ["effect", "effectively", "effective"], correct: "effective", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»©ng sau 'to be'. 'Effective' lÃ  tÃ­nh tá»«." },
            { sentence: "She is a person of great ...", blanks: ["integrity"], options: ["integer", "integrated", "integrity"], correct: "integrity", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'of great'. 'Integrity' lÃ  danh tá»«." },
            { sentence: "The company operates in a ... market.", blanks: ["global"], options: ["globe", "globally", "global"], correct: "global", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'market'." },
            { sentence: "The research provides a better ... of the issue.", blanks: ["understanding"], options: ["understand", "understood", "understanding"], correct: "understanding", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a better'. 'Understanding' lÃ  danh tá»« cá»§a 'understand'." },
            { sentence: "His ... was the reason for their defeat.", blanks: ["negligence"], options: ["neglect", "negligent", "negligence"], correct: "negligence", explanation: "Cáº§n má»™t danh tá»« (noun) lÃ m chá»§ ngá»¯. 'Negligence' lÃ  danh tá»« cá»§a 'neglect'." },
            { sentence: "The team's ... was excellent.", blanks: ["performance"], options: ["perform", "performer", "performance"], correct: "performance", explanation: "Cáº§n má»™t danh tá»« (noun) lÃ m chá»§ ngá»¯. 'Performance' lÃ  danh tá»« cá»§a 'perform'." },
            { sentence: "They acted with great ...", blanks: ["courage"], options: ["courageous", "courageously", "courage"], correct: "courage", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'with great'. 'Courage' lÃ  danh tá»«." },
            { sentence: "The student's essay showed great ...", blanks: ["originality"], options: ["origin", "original", "originality"], correct: "originality", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'great'. 'Originality' lÃ  danh tá»« cá»§a 'original'." },
            { sentence: "The new system is ... to use.", blanks: ["simple"], options: ["simplify", "simplicity", "simple"], correct: "simple", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»©ng sau 'to be'. 'Simple' lÃ  tÃ­nh tá»«." },
            { sentence: "Her ... made her popular.", blanks: ["friendliness"], options: ["friend", "friendly", "friendliness"], correct: "friendliness", explanation: "Cáº§n má»™t danh tá»« (noun) lÃ m chá»§ ngá»¯. 'Friendliness' lÃ  danh tá»« cá»§a 'friendly'." },
            { sentence: "The weather is very ... today.", blanks: ["pleasant"], options: ["please", "pleasure", "pleasant"], correct: "pleasant", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'weather'." },
            { sentence: "The project's ... was quite challenging.", blanks: ["completion"], options: ["complete", "completely", "completion"], correct: "completion", explanation: "Cáº§n má»™t danh tá»« (noun) lÃ m chá»§ ngá»¯. 'Completion' lÃ  danh tá»« cá»§a 'complete'." },
            { sentence: "He is known for his ... of animals.", blanks: ["love"], options: ["love", "lovely", "loving"], correct: "love", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'his'. 'Love' lÃ  danh tá»«." },
            { sentence: "The government has made a strong ... to reduce pollution.", blanks: ["commitment"], options: ["commit", "committed", "commitment"], correct: "commitment", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a strong'. 'Commitment' lÃ  danh tá»«." },
            { sentence: "Her ... is her greatest asset.", blanks: ["kindness"], options: ["kind", "kindly", "kindness"], correct: "kindness", explanation: "Cáº§n má»™t danh tá»« (noun) lÃ m chá»§ ngá»¯. 'Kindness' lÃ  danh tá»« cá»§a 'kind'." },
            { sentence: "The teacher's ... was very helpful.", blanks: ["advice"], options: ["advise", "advisable", "advice"], correct: "advice", explanation: "Cáº§n má»™t danh tá»« (noun) lÃ m chá»§ ngá»¯. 'Advice' lÃ  danh tá»«." },
            { sentence: "The patient is making a slow ...", blanks: ["recovery"], options: ["recover", "recoverable", "recovery"], correct: "recovery", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a slow'. 'Recovery' lÃ  danh tá»« cá»§a 'recover'." },
            { sentence: "The new policy will have a major ... on the economy.", blanks: ["impact"], options: ["impact", "impactful", "impacting"], correct: "impact", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'a major'. 'Impact' lÃ  danh tá»«." },
            { sentence: "She has a very ... approach to her problems.", blanks: ["practical"], options: ["practice", "practically", "practical"], correct: "practical", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'approach'." },
            { sentence: "The machine is ... to operate.", blanks: ["easy"], options: ["ease", "easily", "easy"], correct: "easy", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»©ng sau 'to be'. 'Easy' lÃ  tÃ­nh tá»«." },
            { sentence: "His ... of the situation was completely wrong.", blanks: ["assessment"], options: ["assess", "assessor", "assessment"], correct: "assessment", explanation: "Cáº§n má»™t danh tá»« (noun) sau 'His'. 'Assessment' lÃ  danh tá»« cá»§a 'assess'." },
            { sentence: "The new rules are ... for everyone.", blanks: ["binding"], options: ["bind", "binding", "bound"], correct: "binding", explanation: "Cáº§n má»™t tÃ­nh tá»« (adjective) Ä‘á»ƒ bá»• nghÄ©a cho 'rules'. 'Binding' cÃ³ nghÄ©a lÃ  'rÃ ng buá»™c'." },
            { sentence: "The team worked ... to meet the deadline.", blanks: ["tirelessly"], options: ["tireless", "tirelessly", "tired"], correct: "tirelessly", explanation: "Cáº§n má»™t tráº¡ng tá»« (adverb) Ä‘á»ƒ bá»• nghÄ©a cho Ä‘á»™ng tá»« 'worked'." },
            { sentence: "He is a ... of great intelligence.", blanks: ["man"], options: ["man", "manly", "manliness"], correct: "man", explanation: "Cáº§n má»™t danh tá»« (noun) chá»‰ ngÆ°á»i. 'Man' lÃ  danh tá»«." }
        ];

        let currentExerciseIndex = 0;
        let score = 0;
        let hasChecked = false;

        document.addEventListener('DOMContentLoaded', () => {
            renderExercise(currentExerciseIndex);
            document.getElementById('check-button').addEventListener('click', checkAnswer);
            document.getElementById('next-button').addEventListener('click', nextQuestion);
        });

        function renderExercise(index) {
            const container = document.getElementById('exercise-container');
            container.innerHTML = '';
            hasChecked = false;
            document.getElementById('feedback-message').textContent = "";
            document.getElementById('check-button').style.display = 'block';

            if (index >= exercises.length) {
                showSummary();
                return;
            }

            const exercise = exercises[index];
            const exerciseHTML = `
                <div class="bg-gray-50 rounded-2xl p-6 shadow-inner">
                    <div class="text-lg md:text-xl font-bold text-gray-700 mb-4">CÃ¢u ${index + 1} / ${exercises.length}</div>
                    <p id="sentence-${index}" class="text-gray-800 text-lg md:text-xl leading-relaxed">
                        ${exercise.sentence.replace('...', `<span class="drop-zone border-2 border-dashed border-gray-400 rounded-lg p-2 md:p-3 inline-block w-40 h-10 md:h-12 align-middle mx-1" data-correct="${exercise.correct}"></span>`)}
                    </p>
                    <div id="options-${index}" class="flex flex-wrap gap-4 mt-6 justify-center md:justify-start">
                        ${exercise.options.sort(() => Math.random() - 0.5).map(option => `
                            <div class="draggable bg-indigo-500 text-white font-semibold py-2 px-6 rounded-full shadow-md hover:bg-indigo-600 transition-colors" draggable="true" data-word="${option}">
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                </div>
                <div id="explanation-${index}" class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mt-4 hidden rounded-lg">
                    <p class="font-bold">Giáº£i thÃ­ch:</p>
                    <p>${exercise.explanation}</p>
                </div>
            `;
            container.innerHTML = exerciseHTML;

            addEventListenersForDragAndDrop();
        }

        function addEventListenersForDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable');
            const dropZones = document.querySelectorAll('.drop-zone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', e.target.dataset.word);
                    e.target.classList.add('opacity-50');
                });
                draggable.addEventListener('dragend', (e) => {
                    e.target.classList.remove('opacity-50');
                });
                
                // Add touch events for mobile
                draggable.addEventListener('touchstart', (e) => {
                    const touch = e.touches[0];
                    draggable.dataset.touchX = touch.clientX;
                    draggable.dataset.touchY = touch.clientY;
                    draggable.classList.add('opacity-50');
                });

                draggable.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const diffX = touch.clientX - draggable.dataset.touchX;
                    const diffY = touch.clientY - draggable.dataset.touchY;
                    draggable.style.transform = `translate(${diffX}px, ${diffY}px)`;
                });

                draggable.addEventListener('touchend', (e) => {
                    draggable.style.transform = 'translate(0, 0)';
                    draggable.classList.remove('opacity-50');
                    const touch = e.changedTouches[0];
                    const dropZone = document.elementFromPoint(touch.clientX, touch.clientY).closest('.drop-zone');

                    if (dropZone && dropZone.children.length === 0) {
                        const word = draggable.dataset.word;
                        const newElement = document.createElement('div');
                        newElement.className = "text-center w-full h-full flex items-center justify-center text-gray-900 font-bold";
                        newElement.textContent = word;
                        newElement.dataset.word = word;
                        dropZone.appendChild(newElement);
                        draggable.style.display = 'none';
                    }
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const data = e.dataTransfer.getData('text/plain');
                    const droppedWordElement = document.querySelector(`.draggable[data-word="${data}"]`);
                    
                    if (zone.children.length === 0) {
                        const newElement = document.createElement('div');
                        newElement.className = "text-center w-full h-full flex items-center justify-center text-gray-900 font-bold";
                        newElement.textContent = data;
                        newElement.dataset.word = data;
                        zone.appendChild(newElement);
                        droppedWordElement.style.display = 'none';
                    }
                    zone.classList.remove('drag-over');
                });
            });
        }

        function checkAnswer() {
            const dropZone = document.querySelector('.drop-zone');
            const droppedWordElement = dropZone.querySelector('div');
            const feedbackMessage = document.getElementById('feedback-message');
            const explanationDiv = document.getElementById(`explanation-${currentExerciseIndex}`);

            if (hasChecked) {
                feedbackMessage.textContent = "Báº¡n Ä‘Ã£ kiá»ƒm tra cÃ¢u nÃ y. Vui lÃ²ng nháº¥n 'CÃ¢u Tiáº¿p' Ä‘á»ƒ chuyá»ƒn cÃ¢u.";
                feedbackMessage.className = "mt-4 text-xl font-semibold text-gray-600";
                return;
            }

            if (!droppedWordElement) {
                feedbackMessage.textContent = "Vui lÃ²ng kÃ©o má»™t tá»« vÃ o Ã´ trá»‘ng!";
                feedbackMessage.className = "mt-4 text-xl font-semibold text-red-600";
                return;
            }

            const droppedWord = droppedWordElement.dataset.word;
            const correctWord = dropZone.dataset.correct;

            if (droppedWord === correctWord) {
                score++;
                dropZone.classList.add('correct');
                dropZone.classList.remove('incorrect');
                feedbackMessage.textContent = "ChÃ­nh xÃ¡c! ðŸŽ‰";
                feedbackMessage.className = "mt-4 text-xl font-semibold text-green-600";
                explanationDiv.classList.remove('hidden');
                hasChecked = true;
            } else {
                dropZone.classList.add('incorrect');
                dropZone.classList.remove('correct');
                feedbackMessage.textContent = "ChÆ°a chÃ­nh xÃ¡c. Thá»­ láº¡i nhÃ©! ðŸ¤”";
                feedbackMessage.className = "mt-4 text-xl font-semibold text-red-600";
                explanationDiv.classList.remove('hidden');
                const optionsContainer = document.getElementById(`options-${currentExerciseIndex}`);
                const draggableElements = optionsContainer.querySelectorAll('.draggable');
                draggableElements.forEach(el => el.style.display = 'block');
                dropZone.innerHTML = '';
            }
        }
        
        function nextQuestion() {
            if (currentExerciseIndex < exercises.length - 1) {
                currentExerciseIndex++;
                renderExercise(currentExerciseIndex);
            } else {
                showSummary();
            }
        }

        function showSummary() {
            const container = document.getElementById('exercise-container');
            container.innerHTML = `
                <div class="text-center text-3xl md:text-4xl font-extrabold text-green-700">
                    <p>HoÃ n thÃ nh! ðŸŽ‰</p>
                    <p class="mt-4">Tá»•ng káº¿t káº¿t quáº£ cá»§a báº¡n:</p>
                    <p class="mt-2 text-indigo-600">${score} / ${exercises.length}</p>
                </div>
            `;
            document.getElementById('check-button').style.display = 'none';
            document.getElementById('next-button').style.display = 'none';
            document.getElementById('feedback-message').textContent = "";
        }
    </script>
</body>
</html>